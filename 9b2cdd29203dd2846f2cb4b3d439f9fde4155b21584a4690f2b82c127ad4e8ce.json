{"ast":null,"code":"import \"core-js/modules/es.iterator.constructor.js\";\nimport \"core-js/modules/es.iterator.for-each.js\";\nimport { onMounted } from 'vue';\nimport { useOrdersStore } from '../stores/orders';\nimport { useCartStore } from '../stores/cart';\nexport default {\n  name: 'OrdersView',\n  setup() {\n    const ordersStore = useOrdersStore();\n    const cartStore = useCartStore();\n    onMounted(() => {\n      ordersStore.loadFromLocalStorage();\n    });\n    const getStatusText = status => {\n      const statusMap = {\n        pending: '待支付',\n        paid: '已支付',\n        completed: '已完成',\n        cancelled: '已取消'\n      };\n      return statusMap[status] || status;\n    };\n    const getPaymentText = method => {\n      const paymentMap = {\n        alipay: '支付宝',\n        wechat: '微信支付',\n        card: '银行卡'\n      };\n      return paymentMap[method] || method;\n    };\n    const cancelOrder = orderId => {\n      if (confirm('确定要取消订单吗？')) {\n        ordersStore.updateOrderStatus(orderId, 'cancelled');\n      }\n    };\n    const payOrder = orderId => {\n      ordersStore.updateOrderStatus(orderId, 'paid');\n      alert('支付成功！');\n    };\n    const confirmOrder = orderId => {\n      ordersStore.updateOrderStatus(orderId, 'completed');\n      alert('订单已完成！');\n    };\n    const reorder = order => {\n      // 将订单商品添加到购物车\n      order.items.forEach(item => {\n        for (let i = 0; i < item.quantity; i++) {\n          cartStore.addItem(item, order.restaurantId); // 使用订单关联的商家ID\n        }\n      });\n      alert('商品已添加到购物车');\n    };\n    return {\n      ordersStore,\n      getStatusText,\n      getPaymentText,\n      cancelOrder,\n      payOrder,\n      confirmOrder,\n      reorder\n    };\n  }\n};","map":{"version":3,"names":["onMounted","useOrdersStore","useCartStore","name","setup","ordersStore","cartStore","loadFromLocalStorage","getStatusText","status","statusMap","pending","paid","completed","cancelled","getPaymentText","method","paymentMap","alipay","wechat","card","cancelOrder","orderId","confirm","updateOrderStatus","payOrder","alert","confirmOrder","reorder","order","items","forEach","item","i","quantity","addItem","restaurantId"],"sources":["C:\\Users\\cll13\\Desktop\\01\\food-delivery-vuecli\\src\\views\\OrdersView.vue"],"sourcesContent":["<template>\n  <div class=\"orders-container\">\n    <h2>我的订单</h2>\n    \n    <div v-if=\"ordersStore.allOrders.length === 0\" class=\"no-orders\">\n      <p>您还没有订单</p>\n      <router-link to=\"/\" class=\"go-shopping-btn\">去逛逛</router-link>\n    </div>\n    \n    <div v-else class=\"orders-list\">\n      <div class=\"order-card\" v-for=\"order in ordersStore.allOrders\" :key=\"order.id\">\n        <div class=\"order-header\">\n          <span class=\"order-id\">订单号: {{ order.id }}</span>\n          <span class=\"order-time\">{{ order.time }}</span>\n          <span :class=\"['order-status', order.status]\">\n            {{ getStatusText(order.status) }}\n          </span>\n        </div>\n\n        <div class=\"order-items\">\n          <div class=\"order-item\" v-for=\"item in order.items\" :key=\"item.id\">\n            <span>{{ item.name }}</span>\n            <span>x{{ item.quantity }}</span>\n            <span>¥{{ item.price }}</span>\n          </div>\n        </div>\n\n        <div class=\"order-address\">\n          <h4>收货信息</h4>\n          <p>{{ order.address.recipient }} {{ order.address.phone }}</p>\n          <p>{{ order.address.address }}</p>\n        </div>\n\n        <div class=\"order-payment\">\n          <div class=\"payment-method\">\n            支付方式: {{ getPaymentText(order.paymentMethod) }}\n          </div>\n          <div class=\"order-total\">\n            总计: ¥{{ order.totalPrice.toFixed(2) }}\n          </div>\n        </div>\n\n        <div class=\"order-actions\">\n          <button \n            v-if=\"order.status === 'pending'\" \n            class=\"action-btn cancel-btn\"\n            @click=\"cancelOrder(order.id)\"\n          >\n            取消订单\n          </button>\n          <button \n            v-if=\"order.status === 'pending'\" \n            class=\"action-btn pay-btn\"\n            @click=\"payOrder(order.id)\"\n          >\n            立即支付\n          </button>\n          <button \n            v-if=\"order.status === 'pending'\" \n            class=\"action-btn confirm-btn\"\n            @click=\"confirmOrder(order.id)\"\n          >\n            确认收货\n          </button>\n          <button class=\"action-btn reorder-btn\" @click=\"reorder(order)\">\n            再次购买\n          </button>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { onMounted } from 'vue'\nimport { useOrdersStore } from '../stores/orders'\nimport { useCartStore } from '../stores/cart'\n\nexport default {\n  name: 'OrdersView',\n  setup() {\n    const ordersStore = useOrdersStore()\n    const cartStore = useCartStore()\n\n    onMounted(() => {\n      ordersStore.loadFromLocalStorage()\n    })\n\n    const getStatusText = (status) => {\n      const statusMap = {\n        pending: '待支付',\n        paid: '已支付',\n        completed: '已完成',\n        cancelled: '已取消'\n      }\n      return statusMap[status] || status\n    }\n\n    const getPaymentText = (method) => {\n      const paymentMap = {\n        alipay: '支付宝',\n        wechat: '微信支付',\n        card: '银行卡'\n      }\n      return paymentMap[method] || method\n    }\n\n    const cancelOrder = (orderId) => {\n      if (confirm('确定要取消订单吗？')) {\n        ordersStore.updateOrderStatus(orderId, 'cancelled')\n      }\n    }\n\n    const payOrder = (orderId) => {\n      ordersStore.updateOrderStatus(orderId, 'paid')\n      alert('支付成功！')\n    }\n\n    const confirmOrder = (orderId) => {\n      ordersStore.updateOrderStatus(orderId, 'completed')\n      alert('订单已完成！')\n    }\n\n    const reorder = (order) => {\n      // 将订单商品添加到购物车\n      order.items.forEach(item => {\n        for (let i = 0; i < item.quantity; i++) {\n          cartStore.addItem(item, order.restaurantId) // 使用订单关联的商家ID\n        }\n      })\n      alert('商品已添加到购物车')\n    }\n\n    return {\n      ordersStore,\n      getStatusText,\n      getPaymentText,\n      cancelOrder,\n      payOrder,\n      confirmOrder,\n      reorder\n    }\n  }\n}\n</script>\n\n<style scoped>\n.orders-container {\n  max-width: 1200px;\n  margin: 0 auto;\n  padding: 20px;\n}\n\n.orders-container h2 {\n  color: #333;\n  margin-bottom: 20px;\n}\n\n.no-orders {\n  text-align: center;\n  padding: 50px 0;\n}\n\n.no-orders p {\n  font-size: 1.2rem;\n  color: #666;\n  margin-bottom: 20px;\n}\n\n.go-shopping-btn {\n  display: inline-block;\n  padding: 10px 20px;\n  background-color: #e74c3c;\n  color: white;\n  text-decoration: none;\n  border-radius: 4px;\n}\n\n.orders-list {\n  display: flex;\n  flex-direction: column;\n  gap: 20px;\n}\n\n.order-card {\n  border: 1px solid #ddd;\n  border-radius: 8px;\n  padding: 20px;\n  background-color: white;\n}\n\n.order-header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 15px;\n  padding-bottom: 10px;\n  border-bottom: 1px solid #eee;\n}\n\n.order-id {\n  font-weight: bold;\n  color: #333;\n}\n\n.order-time {\n  color: #666;\n  font-size: 0.9rem;\n}\n\n.order-status {\n  padding: 5px 10px;\n  border-radius: 4px;\n  font-size: 0.9rem;\n  font-weight: bold;\n}\n\n.order-status.pending {\n  background-color: #fff3cd;\n  color: #856404;\n}\n\n.order-status.paid {\n  background-color: #d4edda;\n  color: #155724;\n}\n\n.order-status.completed {\n  background-color: #d1ecf1;\n  color: #0c5460;\n}\n\n.order-status.cancelled {\n  background-color: #f8d7da;\n  color: #721c24;\n}\n\n.order-items {\n  margin-bottom: 15px;\n}\n\n.order-item {\n  display: flex;\n  justify-content: space-between;\n  margin-bottom: 8px;\n  color: #666;\n}\n\n.order-address {\n  margin-bottom: 15px;\n  padding: 15px;\n  background-color: #f9f9f9;\n  border-radius: 4px;\n}\n\n.order-address h4 {\n  margin: 0 0 10px 0;\n  color: #333;\n}\n\n.order-address p {\n  margin: 5px 0;\n  color: #666;\n}\n\n.order-payment {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 15px;\n  padding-top: 15px;\n  border-top: 1px solid #eee;\n}\n\n.payment-method {\n  color: #666;\n}\n\n.order-total {\n  font-size: 1.2rem;\n  font-weight: bold;\n  color: #e74c3c;\n}\n\n.order-actions {\n  display: flex;\n  gap: 10px;\n  justify-content: flex-end;\n}\n\n.action-btn {\n  padding: 8px 16px;\n  border: none;\n  border-radius: 4px;\n  cursor: pointer;\n  font-size: 0.9rem;\n}\n\n.cancel-btn {\n  background-color: #f44336;\n  color: white;\n}\n\n.pay-btn {\n  background-color: #4caf50;\n  color: white;\n}\n\n.confirm-btn {\n  background-color: #2196f3;\n  color: white;\n}\n\n.reorder-btn {\n  background-color: #9e9e9e;\n  color: white;\n}\n</style>"],"mappings":";;AA0EA,SAASA,SAAQ,QAAS,KAAI;AAC9B,SAASC,cAAa,QAAS,kBAAiB;AAChD,SAASC,YAAW,QAAS,gBAAe;AAE5C,eAAe;EACbC,IAAI,EAAE,YAAY;EAClBC,KAAKA,CAAA,EAAG;IACN,MAAMC,WAAU,GAAIJ,cAAc,CAAC;IACnC,MAAMK,SAAQ,GAAIJ,YAAY,CAAC;IAE/BF,SAAS,CAAC,MAAM;MACdK,WAAW,CAACE,oBAAoB,CAAC;IACnC,CAAC;IAED,MAAMC,aAAY,GAAKC,MAAM,IAAK;MAChC,MAAMC,SAAQ,GAAI;QAChBC,OAAO,EAAE,KAAK;QACdC,IAAI,EAAE,KAAK;QACXC,SAAS,EAAE,KAAK;QAChBC,SAAS,EAAE;MACb;MACA,OAAOJ,SAAS,CAACD,MAAM,KAAKA,MAAK;IACnC;IAEA,MAAMM,cAAa,GAAKC,MAAM,IAAK;MACjC,MAAMC,UAAS,GAAI;QACjBC,MAAM,EAAE,KAAK;QACbC,MAAM,EAAE,MAAM;QACdC,IAAI,EAAE;MACR;MACA,OAAOH,UAAU,CAACD,MAAM,KAAKA,MAAK;IACpC;IAEA,MAAMK,WAAU,GAAKC,OAAO,IAAK;MAC/B,IAAIC,OAAO,CAAC,WAAW,CAAC,EAAE;QACxBlB,WAAW,CAACmB,iBAAiB,CAACF,OAAO,EAAE,WAAW;MACpD;IACF;IAEA,MAAMG,QAAO,GAAKH,OAAO,IAAK;MAC5BjB,WAAW,CAACmB,iBAAiB,CAACF,OAAO,EAAE,MAAM;MAC7CI,KAAK,CAAC,OAAO;IACf;IAEA,MAAMC,YAAW,GAAKL,OAAO,IAAK;MAChCjB,WAAW,CAACmB,iBAAiB,CAACF,OAAO,EAAE,WAAW;MAClDI,KAAK,CAAC,QAAQ;IAChB;IAEA,MAAME,OAAM,GAAKC,KAAK,IAAK;MACzB;MACAA,KAAK,CAACC,KAAK,CAACC,OAAO,CAACC,IAAG,IAAK;QAC1B,KAAK,IAAIC,CAAA,GAAI,CAAC,EAAEA,CAAA,GAAID,IAAI,CAACE,QAAQ,EAAED,CAAC,EAAE,EAAE;UACtC3B,SAAS,CAAC6B,OAAO,CAACH,IAAI,EAAEH,KAAK,CAACO,YAAY,GAAE;QAC9C;MACF,CAAC;MACDV,KAAK,CAAC,WAAW;IACnB;IAEA,OAAO;MACLrB,WAAW;MACXG,aAAa;MACbO,cAAc;MACdM,WAAW;MACXI,QAAQ;MACRE,YAAY;MACZC;IACF;EACF;AACF","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}