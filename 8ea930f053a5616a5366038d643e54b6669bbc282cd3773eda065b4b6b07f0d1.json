{"ast":null,"code":"import \"core-js/modules/es.iterator.constructor.js\";\nimport \"core-js/modules/es.iterator.filter.js\";\nimport \"core-js/modules/es.iterator.some.js\";\nimport { ref, computed } from 'vue';\nimport { useRoute } from 'vue-router';\nimport { useCartStore } from '../stores/cart';\nimport { useRestaurantsStore } from '../stores/restaurants';\nexport default {\n  name: 'RestaurantView',\n  setup() {\n    const route = useRoute();\n    const cartStore = useCartStore();\n    const restaurantsStore = useRestaurantsStore();\n    const activeCategory = ref('全部');\n    const restaurant = computed(() => {\n      return restaurantsStore.getRestaurantById(route.params.id);\n    });\n    const menuItems = computed(() => {\n      return restaurantsStore.getMenuItemsByRestaurantId(route.params.id);\n    });\n    const categories = computed(() => {\n      return restaurantsStore.getMenuCategoriesByRestaurantId(route.params.id);\n    });\n    const filteredMenuItems = computed(() => {\n      if (activeCategory.value === '全部') {\n        return menuItems.value;\n      }\n      return menuItems.value.filter(item => {\n        return item.tags && item.tags.split(',').some(tag => tag.trim() === activeCategory.value);\n      });\n    });\n    const addToCart = item => {\n      cartStore.addItem(item, restaurant.value.id);\n      alert('已加入购物车');\n    };\n    return {\n      restaurant,\n      menuItems,\n      categories,\n      activeCategory,\n      filteredMenuItems,\n      cartStore,\n      addToCart,\n      route,\n      kfcImage,\n      mcdonaldsImage,\n      pizzaHutImage,\n      haidilaoImage\n    };\n  }\n};","map":{"version":3,"names":["ref","computed","useRoute","useCartStore","useRestaurantsStore","name","setup","route","cartStore","restaurantsStore","activeCategory","restaurant","getRestaurantById","params","id","menuItems","getMenuItemsByRestaurantId","categories","getMenuCategoriesByRestaurantId","filteredMenuItems","value","filter","item","tags","split","some","tag","trim","addToCart","addItem","alert","kfcImage","mcdonaldsImage","pizzaHutImage","haidilaoImage"],"sources":["C:\\Users\\cll13\\Desktop\\01\\food-delivery-vuecli\\src\\views\\RestaurantView.vue"],"sourcesContent":["<template>\n  <div class=\"restaurant-container\">\n    <div class=\"student-info\">24210816007 陈朗朗</div>\n    <div class=\"restaurant-header\">\n      <!-- 使用public目录下的图片 -->\n      <img \n        :src=\"`/${['kfc', 'mcdonalds', 'pizza_hut', 'haidilao'][parseInt(route.params.id) - 1]}.${parseInt(route.params.id) === 2 ? 'webp' : 'jpg'}`\" \n        :alt=\"restaurant.name\" \n        class=\"restaurant-banner\" \n      />\n      <div class=\"restaurant-info\">\n        <h1>{{ restaurant.name }}</h1>\n        <div class=\"restaurant-meta\">\n          <span class=\"rating\">⭐ {{ restaurant.rating }}</span>\n          <span class=\"distance\">{{ restaurant.distance }}km</span>\n          <span class=\"delivery-time\">{{ restaurant.deliveryTime }}分钟</span>\n          <span class=\"delivery-fee\">配送费 ¥{{ restaurant.deliveryFee }}</span>\n        </div>\n        <div class=\"restaurant-description\">{{ restaurant.description }}</div>\n      </div>\n    </div>\n\n    <div class=\"menu-container\">\n      <div class=\"menu-tabs\">\n        <button \n          v-for=\"category in categories\" \n          :key=\"category\"\n          :class=\"['tab-btn', { active: activeCategory === category }]\"\n          @click=\"activeCategory = category\"\n        >\n          {{ category }}\n        </button>\n      </div>\n\n      <div class=\"menu-items\">\n        <div \n          class=\"menu-item\" \n          v-for=\"item in filteredMenuItems\" \n          :key=\"item.id\"\n          :class=\"{ 'unavailable': !item.isAvailable }\"\n        >\n          <div class=\"item-info\">\n            <h3>{{ item.name }}</h3>\n            <p class=\"item-description\">{{ item.description }}</p>\n            <p class=\"item-price\">¥{{ item.price }}</p>\n            <div class=\"item-meta\">\n              <span v-if=\"item.isAvailable\" class=\"stock\">库存: {{ item.stock }}</span>\n              <span v-else class=\"unavailable-text\">已售罄</span>\n              <span class=\"sales\">月销: {{ item.salesVolume }}</span>\n              <span class=\"tags\" v-if=\"item.tags\">\n                <span v-for=\"tag in item.tags.split(',')\" :key=\"tag\" class=\"tag\">\n                  {{ tag.trim() }}\n                </span>\n              </span>\n            </div>\n          </div>\n          <div class=\"item-actions\">\n            <button \n              class=\"add-to-cart-btn\" \n              @click=\"addToCart(item)\"\n              :disabled=\"!item.isAvailable || item.stock <= 0\"\n            >\n              {{ item.isAvailable && item.stock > 0 ? '加入购物车' : '已售罄' }}\n            </button>\n          </div>\n        </div>\n      </div>\n    </div>\n\n    <div class=\"cart-summary\" v-if=\"!cartStore.isEmpty\">\n      <div class=\"cart-info\">\n        <span>购物车({{ cartStore.totalItems }})</span>\n        <span>总计: ¥{{ cartStore.totalPrice.toFixed(2) }}</span>\n      </div>\n      <router-link to=\"/cart\" class=\"view-cart-btn\">去结算</router-link>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { ref, computed } from 'vue'\nimport { useRoute } from 'vue-router'\nimport { useCartStore } from '../stores/cart'\nimport { useRestaurantsStore } from '../stores/restaurants'\n\nexport default {\n  name: 'RestaurantView',\n  setup() {\n    const route = useRoute()\n    const cartStore = useCartStore()\n    const restaurantsStore = useRestaurantsStore()\n    const activeCategory = ref('全部')\n\n    const restaurant = computed(() => {\n      return restaurantsStore.getRestaurantById(route.params.id)\n    })\n\n    const menuItems = computed(() => {\n      return restaurantsStore.getMenuItemsByRestaurantId(route.params.id)\n    })\n\n    const categories = computed(() => {\n      return restaurantsStore.getMenuCategoriesByRestaurantId(route.params.id)\n    })\n\n    const filteredMenuItems = computed(() => {\n      if (activeCategory.value === '全部') {\n        return menuItems.value\n      }\n      return menuItems.value.filter(item => {\n        return item.tags && item.tags.split(',').some(tag => tag.trim() === activeCategory.value)\n      })\n    })\n\n    const addToCart = (item) => {\n      cartStore.addItem(item, restaurant.value.id)\n      alert('已加入购物车')\n    }\n\n    return {\n      restaurant,\n      menuItems,\n      categories,\n      activeCategory,\n      filteredMenuItems,\n      cartStore,\n      addToCart,\n      route,\n      kfcImage,\n      mcdonaldsImage,\n      pizzaHutImage,\n      haidilaoImage\n    }\n  }\n}\n</script>\n\n<style scoped>\n.student-info {\n  font-size: 18px;\n  font-weight: bold;\n  color: #333;\n  padding: 10px 20px;\n  background-color: #f5f5f5;\n  border-bottom: 1px solid #ddd;\n  text-align: center;\n}\n\n.restaurant-container {\n  max-width: 1200px;\n  margin: 0 auto;\n}\n\n.restaurant-banner {\n  width: 100%;\n  height: 300px;\n  object-fit: cover;\n}\n\n.restaurant-info {\n  padding: 20px;\n  background-color: white;\n  box-shadow: 0 -5px 10px rgba(0, 0, 0, 0.1);\n}\n\n.restaurant-info h1 {\n  margin: 0 0 10px 0;\n  color: #333;\n}\n\n.restaurant-meta {\n  display: flex;\n  gap: 20px;\n  margin-bottom: 10px;\n  font-size: 0.9rem;\n  color: #666;\n}\n\n.restaurant-description {\n  color: #888;\n  font-size: 0.95rem;\n}\n\n.menu-container {\n  padding: 20px;\n}\n\n.menu-tabs {\n  display: flex;\n  gap: 10px;\n  margin-bottom: 20px;\n  overflow-x: auto;\n}\n\n.tab-btn {\n  padding: 8px 16px;\n  border: 1px solid #ddd;\n  background-color: white;\n  border-radius: 20px;\n  cursor: pointer;\n  white-space: nowrap;\n}\n\n.tab-btn.active {\n  background-color: #e74c3c;\n  color: white;\n  border-color: #e74c3c;\n}\n\n.menu-items {\n  display: flex;\n  flex-direction: column;\n  gap: 15px;\n}\n\n.menu-item {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 15px;\n  border: 1px solid #ddd;\n  border-radius: 8px;\n  background-color: white;\n}\n\n.item-info h3 {\n  margin: 0 0 5px 0;\n  color: #333;\n}\n\n.item-description {\n  margin: 0 0 5px 0;\n  color: #888;\n  font-size: 0.9rem;\n}\n\n.item-price {\n  margin: 0 0 8px 0;\n  color: #e74c3c;\n  font-weight: bold;\n}\n\n.item-meta {\n  display: flex;\n  flex-wrap: wrap;\n  gap: 10px;\n  font-size: 0.8rem;\n  color: #888;\n}\n\n.stock {\n  color: #27ae60;\n}\n\n.sales {\n  color: #f39c12;\n}\n\n.tags {\n  display: flex;\n  gap: 5px;\n  margin-top: 5px;\n}\n\n.tag {\n  background-color: #f0f0f0;\n  padding: 2px 6px;\n  border-radius: 10px;\n  font-size: 0.75rem;\n  color: #666;\n}\n\n.unavailable {\n  opacity: 0.6;\n}\n\n.unavailable-text {\n  color: #e74c3c;\n  font-weight: bold;\n}\n\n.add-to-cart-btn:disabled {\n  background-color: #bdc3c7;\n  cursor: not-allowed;\n}\n\n.add-to-cart-btn {\n  padding: 8px 16px;\n  background-color: #e74c3c;\n  color: white;\n  border: none;\n  border-radius: 4px;\n  cursor: pointer;\n}\n\n.cart-summary {\n  position: fixed;\n  bottom: 0;\n  left: 0;\n  right: 0;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 15px 20px;\n  background-color: white;\n  box-shadow: 0 -2px 10px rgba(0, 0, 0, 0.1);\n}\n\n.cart-info {\n  display: flex;\n  flex-direction: column;\n}\n\n.view-cart-btn {\n  padding: 10px 20px;\n  background-color: #e74c3c;\n  color: white;\n  text-decoration: none;\n  border-radius: 4px;\n}\n</style>"],"mappings":";;;AAgFA,SAASA,GAAG,EAAEC,QAAO,QAAS,KAAI;AAClC,SAASC,QAAO,QAAS,YAAW;AACpC,SAASC,YAAW,QAAS,gBAAe;AAC5C,SAASC,mBAAkB,QAAS,uBAAsB;AAE1D,eAAe;EACbC,IAAI,EAAE,gBAAgB;EACtBC,KAAKA,CAAA,EAAG;IACN,MAAMC,KAAI,GAAIL,QAAQ,CAAC;IACvB,MAAMM,SAAQ,GAAIL,YAAY,CAAC;IAC/B,MAAMM,gBAAe,GAAIL,mBAAmB,CAAC;IAC7C,MAAMM,cAAa,GAAIV,GAAG,CAAC,IAAI;IAE/B,MAAMW,UAAS,GAAIV,QAAQ,CAAC,MAAM;MAChC,OAAOQ,gBAAgB,CAACG,iBAAiB,CAACL,KAAK,CAACM,MAAM,CAACC,EAAE;IAC3D,CAAC;IAED,MAAMC,SAAQ,GAAId,QAAQ,CAAC,MAAM;MAC/B,OAAOQ,gBAAgB,CAACO,0BAA0B,CAACT,KAAK,CAACM,MAAM,CAACC,EAAE;IACpE,CAAC;IAED,MAAMG,UAAS,GAAIhB,QAAQ,CAAC,MAAM;MAChC,OAAOQ,gBAAgB,CAACS,+BAA+B,CAACX,KAAK,CAACM,MAAM,CAACC,EAAE;IACzE,CAAC;IAED,MAAMK,iBAAgB,GAAIlB,QAAQ,CAAC,MAAM;MACvC,IAAIS,cAAc,CAACU,KAAI,KAAM,IAAI,EAAE;QACjC,OAAOL,SAAS,CAACK,KAAI;MACvB;MACA,OAAOL,SAAS,CAACK,KAAK,CAACC,MAAM,CAACC,IAAG,IAAK;QACpC,OAAOA,IAAI,CAACC,IAAG,IAAKD,IAAI,CAACC,IAAI,CAACC,KAAK,CAAC,GAAG,CAAC,CAACC,IAAI,CAACC,GAAE,IAAKA,GAAG,CAACC,IAAI,CAAC,MAAMjB,cAAc,CAACU,KAAK;MAC1F,CAAC;IACH,CAAC;IAED,MAAMQ,SAAQ,GAAKN,IAAI,IAAK;MAC1Bd,SAAS,CAACqB,OAAO,CAACP,IAAI,EAAEX,UAAU,CAACS,KAAK,CAACN,EAAE;MAC3CgB,KAAK,CAAC,QAAQ;IAChB;IAEA,OAAO;MACLnB,UAAU;MACVI,SAAS;MACTE,UAAU;MACVP,cAAc;MACdS,iBAAiB;MACjBX,SAAS;MACToB,SAAS;MACTrB,KAAK;MACLwB,QAAQ;MACRC,cAAc;MACdC,aAAa;MACbC;IACF;EACF;AACF","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}