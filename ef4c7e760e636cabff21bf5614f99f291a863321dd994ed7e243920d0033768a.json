{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport \"core-js/modules/es.iterator.constructor.js\";\nimport \"core-js/modules/es.iterator.filter.js\";\nimport \"core-js/modules/es.iterator.find.js\";\nimport \"core-js/modules/es.iterator.reduce.js\";\nimport \"core-js/modules/es.json.stringify.js\";\nimport \"core-js/modules/esnext.json.parse.js\";\nimport { defineStore } from 'pinia';\nexport const useCartStore = defineStore('cart', {\n  state: () => {\n    const cartData = localStorage.getItem('cart');\n    if (cartData) {\n      const {\n        items,\n        restaurantId\n      } = JSON.parse(cartData);\n      return {\n        items,\n        restaurantId\n      };\n    }\n    return {\n      items: [],\n      restaurantId: null\n    };\n  },\n  getters: {\n    totalItems: state => state.items.reduce((total, item) => total + item.quantity, 0),\n    totalPrice: state => state.items.reduce((total, item) => total + item.price * item.quantity, 0),\n    isEmpty: state => state.items.length === 0\n  },\n  actions: {\n    addItem(item, restaurantId) {\n      if (this.restaurantId && this.restaurantId !== restaurantId) {\n        this.clear();\n      }\n      this.restaurantId = restaurantId;\n      const existingItem = this.items.find(i => i.id === item.id);\n      if (existingItem) {\n        existingItem.quantity++;\n      } else {\n        this.items.push({\n          ...item,\n          quantity: 1\n        });\n      }\n      this.saveToLocalStorage();\n    },\n    removeItem(itemId) {\n      this.items = this.items.filter(item => item.id !== itemId);\n      if (this.items.length === 0) {\n        this.restaurantId = null;\n      }\n      this.saveToLocalStorage();\n    },\n    updateQuantity(itemId, quantity) {\n      const item = this.items.find(i => i.id === itemId);\n      if (item) {\n        item.quantity = quantity;\n        if (quantity <= 0) {\n          this.removeItem(itemId);\n        }\n        this.saveToLocalStorage();\n      }\n    },\n    clear() {\n      this.items = [];\n      this.restaurantId = null;\n      this.saveToLocalStorage();\n    },\n    saveToLocalStorage() {\n      localStorage.setItem('cart', JSON.stringify({\n        items: this.items,\n        restaurantId: this.restaurantId\n      }));\n    },\n    loadFromLocalStorage() {\n      const cartData = localStorage.getItem('cart');\n      if (cartData) {\n        const {\n          items,\n          restaurantId\n        } = JSON.parse(cartData);\n        this.items = items;\n        this.restaurantId = restaurantId;\n      }\n    }\n  }\n});","map":{"version":3,"names":["defineStore","useCartStore","state","cartData","localStorage","getItem","items","restaurantId","JSON","parse","getters","totalItems","reduce","total","item","quantity","totalPrice","price","isEmpty","length","actions","addItem","clear","existingItem","find","i","id","push","saveToLocalStorage","removeItem","itemId","filter","updateQuantity","setItem","stringify","loadFromLocalStorage"],"sources":["C:/Users/cll13/Desktop/01/food-delivery-vuecli/src/stores/cart.js"],"sourcesContent":["import { defineStore } from 'pinia'\n\nexport const useCartStore = defineStore('cart', {\n  state: () => {\n    const cartData = localStorage.getItem('cart')\n    if (cartData) {\n      const { items, restaurantId } = JSON.parse(cartData)\n      return { items, restaurantId }\n    }\n    return { items: [], restaurantId: null }\n  },\n  getters: {\n    totalItems: (state) => state.items.reduce((total, item) => total + item.quantity, 0),\n    totalPrice: (state) => state.items.reduce((total, item) => total + (item.price * item.quantity), 0),\n    isEmpty: (state) => state.items.length === 0\n  },\n  actions: {\n    addItem(item, restaurantId) {\n      if (this.restaurantId && this.restaurantId !== restaurantId) {\n        this.clear()\n      }\n      \n      this.restaurantId = restaurantId\n      const existingItem = this.items.find(i => i.id === item.id)\n      \n      if (existingItem) {\n        existingItem.quantity++\n      } else {\n        this.items.push({ ...item, quantity: 1 })\n      }\n      \n      this.saveToLocalStorage()\n    },\n    removeItem(itemId) {\n      this.items = this.items.filter(item => item.id !== itemId)\n      if (this.items.length === 0) {\n        this.restaurantId = null\n      }\n      this.saveToLocalStorage()\n    },\n    updateQuantity(itemId, quantity) {\n      const item = this.items.find(i => i.id === itemId)\n      if (item) {\n        item.quantity = quantity\n        if (quantity <= 0) {\n          this.removeItem(itemId)\n        }\n        this.saveToLocalStorage()\n      }\n    },\n    clear() {\n      this.items = []\n      this.restaurantId = null\n      this.saveToLocalStorage()\n    },\n    saveToLocalStorage() {\n      localStorage.setItem('cart', JSON.stringify({\n        items: this.items,\n        restaurantId: this.restaurantId\n      }))\n    },\n    loadFromLocalStorage() {\n      const cartData = localStorage.getItem('cart')\n      if (cartData) {\n        const { items, restaurantId } = JSON.parse(cartData)\n        this.items = items\n        this.restaurantId = restaurantId\n      }\n    }\n  }\n})"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}