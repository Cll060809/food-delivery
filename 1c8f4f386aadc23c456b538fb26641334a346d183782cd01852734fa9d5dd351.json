{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport \"core-js/modules/es.json.stringify.js\";\nimport { onMounted, ref } from 'vue';\nimport { useRouter } from 'vue-router';\nimport { useCartStore } from '../stores/cart';\nexport default {\n  name: 'CartView',\n  setup() {\n    const router = useRouter();\n    const cartStore = useCartStore();\n\n    // 购物车备注功能\n    const cartNotes = ref('');\n    const savedNotes = ref('');\n\n    // 隐藏菜品功能\n    const hiddenItems = ref([]);\n    const showHiddenItems = ref(false); // 控制隐藏菜品区域是否展开\n\n    onMounted(() => {\n      cartStore.loadFromLocalStorage();\n      // 加载已保存的备注\n      const saved = localStorage.getItem('cartNotes');\n      if (saved) {\n        savedNotes.value = saved;\n      }\n    });\n    const updateQuantity = (itemId, quantity) => {\n      cartStore.updateQuantity(itemId, quantity);\n    };\n    const removeItem = itemId => {\n      cartStore.removeItem(itemId);\n    };\n    const clearCart = () => {\n      if (confirm('确定要清空购物车吗？')) {\n        cartStore.clear();\n      }\n    };\n    const checkout = () => {\n      // 将购物车备注保存到localStorage，以便结账页面使用\n      if (savedNotes.value) {\n        localStorage.setItem('orderNotes', JSON.stringify([savedNotes.value]));\n      }\n      router.push('/checkout');\n    };\n\n    // 保存购物车备注\n    const saveCartNotes = () => {\n      if (cartNotes.value.trim()) {\n        savedNotes.value = cartNotes.value.trim();\n        localStorage.setItem('cartNotes', savedNotes.value);\n        cartNotes.value = '';\n      }\n    };\n\n    // 删除购物车备注\n    const deleteCartNotes = () => {\n      savedNotes.value = '';\n      localStorage.removeItem('cartNotes');\n    };\n\n    // 隐藏/显示菜品\n    const toggleItemVisibility = itemId => {\n      const index = hiddenItems.value.indexOf(itemId);\n      if (index === -1) {\n        hiddenItems.value.push(itemId);\n      } else {\n        hiddenItems.value.splice(index, 1);\n      }\n    };\n\n    // 切换隐藏菜品区域的展开/收起状态\n    const toggleHiddenSection = () => {\n      showHiddenItems.value = !showHiddenItems.value;\n    };\n    return {\n      cartStore,\n      updateQuantity,\n      removeItem,\n      clearCart,\n      checkout,\n      cartNotes,\n      savedNotes,\n      saveCartNotes,\n      deleteCartNotes,\n      hiddenItems,\n      toggleItemVisibility\n    };\n  }\n};","map":{"version":3,"names":["onMounted","ref","useRouter","useCartStore","name","setup","router","cartStore","cartNotes","savedNotes","hiddenItems","showHiddenItems","loadFromLocalStorage","saved","localStorage","getItem","value","updateQuantity","itemId","quantity","removeItem","clearCart","confirm","clear","checkout","setItem","JSON","stringify","push","saveCartNotes","trim","deleteCartNotes","toggleItemVisibility","index","indexOf","splice","toggleHiddenSection"],"sources":["C:\\Users\\cll13\\Desktop\\01\\food-delivery-vuecli\\src\\views\\CartView.vue"],"sourcesContent":["<template>\n  <div class=\"cart-container\">\n  <div class=\"student-info\">24210816007 陈朗朗</div>\n  <h2>购物车</h2>\n  \n  <!-- 购物车备注功能 -->\n  <div class=\"cart-notes\">\n    <h3>购物车备注</h3>\n    <div class=\"notes-input\">\n      <input \n        v-model=\"cartNotes\" \n        @keyup.enter=\"saveCartNotes\"\n        placeholder=\"输入购物车备注信息（如：统一少辣、不要香菜等）...\"\n        class=\"notes-input-field\"\n      />\n      <button @click=\"saveCartNotes\" class=\"save-notes-btn\">保存备注</button>\n    </div>\n    <div v-if=\"savedNotes\" class=\"saved-notes\">\n      <div class=\"note-content\">\n        <p><strong>已保存备注：</strong>{{ savedNotes }}</p>\n        <button class=\"delete-note-btn\" @click=\"deleteCartNotes\">删除</button>\n      </div>\n    </div>\n  </div>\n    \n    <div v-if=\"cartStore.isEmpty\" class=\"empty-cart\">\n      <p>购物车是空的</p>\n      <router-link to=\"/\" class=\"go-shopping-btn\">去逛逛</router-link>\n    </div>\n    \n    <div v-else>\n      <div class=\"cart-items\">\n        <!-- 显示未隐藏的菜品 -->\n        <div \n          class=\"cart-item\" \n          v-for=\"item in cartStore.items.filter(item => !hiddenItems.includes(item.id))\" \n          :key=\"item.id\"\n        >\n          <div class=\"item-info\">\n            <h3>{{ item.name }}</h3>\n            <p class=\"item-price\">¥{{ item.price }}</p>\n          </div>\n          <div class=\"item-quantity\">\n            <button class=\"quantity-btn\" @click=\"updateQuantity(item.id, item.quantity - 1)\">-</button>\n            <span class=\"quantity\">{{ item.quantity }}</span>\n            <button class=\"quantity-btn\" @click=\"updateQuantity(item.id, item.quantity + 1)\">+</button>\n          </div>\n          <div class=\"item-subtotal\">\n            ¥{{ (item.price * item.quantity).toFixed(2) }}\n          </div>\n          <div class=\"item-actions\">\n            <button class=\"toggle-visibility-btn\" @click=\"toggleItemVisibility(item.id)\">\n              隐藏\n            </button>\n            <button class=\"remove-item-btn\" @click=\"removeItem(item.id)\">\n              删除\n            </button>\n          </div>\n        </div>\n\n        <!-- 折叠的隐藏菜品区域 -->\n        <div v-if=\"hiddenItems.length > 0\" class=\"hidden-items-section\">\n          <div class=\"hidden-items-header\" @click=\"toggleHiddenSection\">\n            <h3>{{ showHiddenItems ? '收起' : '展开' }}隐藏的菜品 ({{ hiddenItems.length }})</h3>\n            <span class=\"toggle-icon\">{{ showHiddenItems ? '▼' : '▶' }}</span>\n          </div>\n          \n          <div v-if=\"showHiddenItems\" class=\"hidden-items-list\">\n            <div \n              class=\"cart-item hidden\" \n              v-for=\"item in cartStore.items.filter(item => hiddenItems.includes(item.id))\" \n              :key=\"item.id\"\n            >\n              <div class=\"item-info\">\n                <h3>{{ item.name }}</h3>\n                <p class=\"item-price\">¥{{ item.price }}</p>\n              </div>\n              <div class=\"item-quantity\">\n                <button class=\"quantity-btn\" @click=\"updateQuantity(item.id, item.quantity - 1)\">-</button>\n                <span class=\"quantity\">{{ item.quantity }}</span>\n                <button class=\"quantity-btn\" @click=\"updateQuantity(item.id, item.quantity + 1)\">+</button>\n              </div>\n              <div class=\"item-subtotal\">\n                ¥{{ (item.price * item.quantity).toFixed(2) }}\n              </div>\n              <div class=\"item-actions\">\n                <button class=\"toggle-visibility-btn\" @click=\"toggleItemVisibility(item.id)\">\n                  显示\n                </button>\n                <button class=\"remove-item-btn\" @click=\"removeItem(item.id)\">\n                  删除\n                </button>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      <div class=\"cart-actions\">\n        <button class=\"clear-cart-btn\" @click=\"clearCart\">清空购物车</button>\n      </div>\n\n      <div class=\"cart-total\">\n        <div class=\"total-item\">\n          <span>商品总计</span>\n          <span>¥{{ cartStore.totalPrice.toFixed(2) }}</span>\n        </div>\n        <div class=\"total-item\">\n          <span>配送费</span>\n          <span>¥5.00</span>\n        </div>\n        <div class=\"total-item total\">\n          <span>应付金额</span>\n          <span>¥{{ (cartStore.totalPrice + 5).toFixed(2) }}</span>\n        </div>\n      </div>\n\n      <button class=\"checkout-btn\" @click=\"checkout\">去结算</button>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { onMounted, ref } from 'vue'\nimport { useRouter } from 'vue-router'\nimport { useCartStore } from '../stores/cart'\n\nexport default {\n  name: 'CartView',\n  setup() {\n    const router = useRouter()\n    const cartStore = useCartStore()\n    \n    // 购物车备注功能\n    const cartNotes = ref('')\n    const savedNotes = ref('')\n    \n    // 隐藏菜品功能\n    const hiddenItems = ref([])\n    const showHiddenItems = ref(false) // 控制隐藏菜品区域是否展开\n\n    onMounted(() => {\n      cartStore.loadFromLocalStorage()\n      // 加载已保存的备注\n      const saved = localStorage.getItem('cartNotes')\n      if (saved) {\n        savedNotes.value = saved\n      }\n    })\n\n    const updateQuantity = (itemId, quantity) => {\n      cartStore.updateQuantity(itemId, quantity)\n    }\n\n    const removeItem = (itemId) => {\n      cartStore.removeItem(itemId)\n    }\n\n    const clearCart = () => {\n      if (confirm('确定要清空购物车吗？')) {\n        cartStore.clear()\n      }\n    }\n\n    const checkout = () => {\n      // 将购物车备注保存到localStorage，以便结账页面使用\n      if (savedNotes.value) {\n        localStorage.setItem('orderNotes', JSON.stringify([savedNotes.value]))\n      }\n      router.push('/checkout')\n    }\n    \n    // 保存购物车备注\n    const saveCartNotes = () => {\n      if (cartNotes.value.trim()) {\n        savedNotes.value = cartNotes.value.trim()\n        localStorage.setItem('cartNotes', savedNotes.value)\n        cartNotes.value = ''\n      }\n    }\n    \n    // 删除购物车备注\n    const deleteCartNotes = () => {\n      savedNotes.value = ''\n      localStorage.removeItem('cartNotes')\n    }\n    \n    // 隐藏/显示菜品\n    const toggleItemVisibility = (itemId) => {\n      const index = hiddenItems.value.indexOf(itemId)\n      if (index === -1) {\n        hiddenItems.value.push(itemId)\n      } else {\n        hiddenItems.value.splice(index, 1)\n      }\n    }\n    \n    // 切换隐藏菜品区域的展开/收起状态\n    const toggleHiddenSection = () => {\n      showHiddenItems.value = !showHiddenItems.value\n    }\n\n    return {\n      cartStore,\n      updateQuantity,\n      removeItem,\n      clearCart,\n      checkout,\n      cartNotes,\n      savedNotes,\n      saveCartNotes,\n      deleteCartNotes,\n      hiddenItems,\n      toggleItemVisibility\n    }\n  }\n}\n</script>\n\n<style scoped>\n.cart-container {\n  max-width: 800px;\n  margin: 0 auto;\n  padding: 20px;\n}\n\n.student-info {\n  font-size: 1.1rem;\n  color: #333;\n  margin-bottom: 15px;\n  font-weight: bold;\n}\n\n.cart-container h2 {\n  color: #333;\n  margin-bottom: 20px;\n}\n\n.empty-cart {\n  text-align: center;\n  padding: 50px 0;\n}\n\n.empty-cart p {\n  font-size: 1.2rem;\n  color: #666;\n  margin-bottom: 20px;\n}\n\n.go-shopping-btn {\n  display: inline-block;\n  padding: 10px 20px;\n  background-color: #e74c3c;\n  color: white;\n  text-decoration: none;\n  border-radius: 4px;\n}\n\n.cart-items {\n  display: flex;\n  flex-direction: column;\n  gap: 15px;\n  margin-bottom: 20px;\n}\n\n.cart-item {\n  display: grid;\n  grid-template-columns: 2fr 1fr 1fr auto;\n  align-items: center;\n  padding: 15px;\n  border: 1px solid #ddd;\n  border-radius: 8px;\n  gap: 15px;\n}\n\n.item-info h3 {\n  margin: 0 0 5px 0;\n  color: #333;\n}\n\n.item-price {\n  margin: 0;\n  color: #e74c3c;\n  font-weight: bold;\n}\n\n.item-quantity {\n  display: flex;\n  align-items: center;\n  gap: 10px;\n}\n\n.quantity-btn {\n  width: 30px;\n  height: 30px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  border: 1px solid #ddd;\n  background-color: white;\n  border-radius: 4px;\n  cursor: pointer;\n}\n\n.quantity {\n  font-weight: bold;\n  min-width: 30px;\n  text-align: center;\n}\n\n.item-subtotal {\n  font-weight: bold;\n  color: #333;\n  text-align: right;\n}\n\n.remove-item-btn {\n  padding: 8px 12px;\n  background-color: #f44336;\n  color: white;\n  border: none;\n  border-radius: 4px;\n  cursor: pointer;\n}\n\n.cart-actions {\n  margin-bottom: 20px;\n}\n\n.clear-cart-btn {\n  padding: 10px 20px;\n  background-color: #9e9e9e;\n  color: white;\n  border: none;\n  border-radius: 4px;\n  cursor: pointer;\n}\n\n.cart-total {\n  border: 1px solid #ddd;\n  border-radius: 8px;\n  padding: 20px;\n  margin-bottom: 20px;\n}\n\n.total-item {\n  display: flex;\n  justify-content: space-between;\n  margin-bottom: 10px;\n  color: #666;\n}\n\n.total-item.total {\n  font-size: 1.2rem;\n  font-weight: bold;\n  color: #333;\n  margin-top: 10px;\n  padding-top: 10px;\n  border-top: 1px solid #ddd;\n}\n\n.cart-notes {\n  background-color: #f9f9f9;\n  border-radius: 8px;\n  padding: 20px;\n  margin-bottom: 20px;\n  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);\n}\n\n.notes-input {\n  display: flex;\n  margin-bottom: 15px;\n}\n\n.notes-input-field {\n  flex: 1;\n  padding: 10px;\n  border: 1px solid #ddd;\n  border-radius: 4px 0 0 4px;\n  font-size: 16px;\n}\n\n.save-notes-btn {\n  background-color: #008CBA;\n  color: white;\n  border: none;\n  padding: 10px 20px;\n  border-radius: 0 4px 4px 0;\n  cursor: pointer;\n  font-size: 16px;\n}\n\n.save-notes-btn:hover {\n  background-color: #007B9A;\n}\n\n.saved-notes {\n  background-color: white;\n  padding: 10px;\n  border-radius: 4px;\n  border: 1px solid #ddd;\n}\n\n.note-content {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n}\n\n.delete-note-btn {\n  padding: 6px 12px;\n  background-color: #f44336;\n  color: white;\n  border: none;\n  border-radius: 4px;\n  cursor: pointer;\n  font-size: 14px;\n}\n\n.delete-note-btn:hover {\n  background-color: #d32f2f;\n}\n\n.item-actions {\n  display: flex;\n  gap: 10px;\n}\n\n.toggle-visibility-btn {\n  padding: 8px 12px;\n  background-color: #9e9e9e;\n  color: white;\n  border: none;\n  border-radius: 4px;\n  cursor: pointer;\n}\n\n.cart-item.hidden {\n  opacity: 0.5;\n  background-color: #f5f5f5;\n}\n\n.checkout-btn {\n  width: 100%;\n  padding: 15px;\n  font-size: 1.1rem;\n  background-color: #e74c3c;\n  color: white;\n  border: none;\n  border-radius: 4px;\n  cursor: pointer;\n}\n</style>"],"mappings":";;AA2HA,SAASA,SAAS,EAAEC,GAAE,QAAS,KAAI;AACnC,SAASC,SAAQ,QAAS,YAAW;AACrC,SAASC,YAAW,QAAS,gBAAe;AAE5C,eAAe;EACbC,IAAI,EAAE,UAAU;EAChBC,KAAKA,CAAA,EAAG;IACN,MAAMC,MAAK,GAAIJ,SAAS,CAAC;IACzB,MAAMK,SAAQ,GAAIJ,YAAY,CAAC;;IAE/B;IACA,MAAMK,SAAQ,GAAIP,GAAG,CAAC,EAAE;IACxB,MAAMQ,UAAS,GAAIR,GAAG,CAAC,EAAE;;IAEzB;IACA,MAAMS,WAAU,GAAIT,GAAG,CAAC,EAAE;IAC1B,MAAMU,eAAc,GAAIV,GAAG,CAAC,KAAK,GAAE;;IAEnCD,SAAS,CAAC,MAAM;MACdO,SAAS,CAACK,oBAAoB,CAAC;MAC/B;MACA,MAAMC,KAAI,GAAIC,YAAY,CAACC,OAAO,CAAC,WAAW;MAC9C,IAAIF,KAAK,EAAE;QACTJ,UAAU,CAACO,KAAI,GAAIH,KAAI;MACzB;IACF,CAAC;IAED,MAAMI,cAAa,GAAIA,CAACC,MAAM,EAAEC,QAAQ,KAAK;MAC3CZ,SAAS,CAACU,cAAc,CAACC,MAAM,EAAEC,QAAQ;IAC3C;IAEA,MAAMC,UAAS,GAAKF,MAAM,IAAK;MAC7BX,SAAS,CAACa,UAAU,CAACF,MAAM;IAC7B;IAEA,MAAMG,SAAQ,GAAIA,CAAA,KAAM;MACtB,IAAIC,OAAO,CAAC,YAAY,CAAC,EAAE;QACzBf,SAAS,CAACgB,KAAK,CAAC;MAClB;IACF;IAEA,MAAMC,QAAO,GAAIA,CAAA,KAAM;MACrB;MACA,IAAIf,UAAU,CAACO,KAAK,EAAE;QACpBF,YAAY,CAACW,OAAO,CAAC,YAAY,EAAEC,IAAI,CAACC,SAAS,CAAC,CAAClB,UAAU,CAACO,KAAK,CAAC,CAAC;MACvE;MACAV,MAAM,CAACsB,IAAI,CAAC,WAAW;IACzB;;IAEA;IACA,MAAMC,aAAY,GAAIA,CAAA,KAAM;MAC1B,IAAIrB,SAAS,CAACQ,KAAK,CAACc,IAAI,CAAC,CAAC,EAAE;QAC1BrB,UAAU,CAACO,KAAI,GAAIR,SAAS,CAACQ,KAAK,CAACc,IAAI,CAAC;QACxChB,YAAY,CAACW,OAAO,CAAC,WAAW,EAAEhB,UAAU,CAACO,KAAK;QAClDR,SAAS,CAACQ,KAAI,GAAI,EAAC;MACrB;IACF;;IAEA;IACA,MAAMe,eAAc,GAAIA,CAAA,KAAM;MAC5BtB,UAAU,CAACO,KAAI,GAAI,EAAC;MACpBF,YAAY,CAACM,UAAU,CAAC,WAAW;IACrC;;IAEA;IACA,MAAMY,oBAAmB,GAAKd,MAAM,IAAK;MACvC,MAAMe,KAAI,GAAIvB,WAAW,CAACM,KAAK,CAACkB,OAAO,CAAChB,MAAM;MAC9C,IAAIe,KAAI,KAAM,CAAC,CAAC,EAAE;QAChBvB,WAAW,CAACM,KAAK,CAACY,IAAI,CAACV,MAAM;MAC/B,OAAO;QACLR,WAAW,CAACM,KAAK,CAACmB,MAAM,CAACF,KAAK,EAAE,CAAC;MACnC;IACF;;IAEA;IACA,MAAMG,mBAAkB,GAAIA,CAAA,KAAM;MAChCzB,eAAe,CAACK,KAAI,GAAI,CAACL,eAAe,CAACK,KAAI;IAC/C;IAEA,OAAO;MACLT,SAAS;MACTU,cAAc;MACdG,UAAU;MACVC,SAAS;MACTG,QAAQ;MACRhB,SAAS;MACTC,UAAU;MACVoB,aAAa;MACbE,eAAe;MACfrB,WAAW;MACXsB;IACF;EACF;AACF","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}